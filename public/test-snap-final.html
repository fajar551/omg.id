<!DOCTYPE html>
<html>
<head>
    <title>Test Snap Final</title>
    <script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="SB-Mid-client-yXcEzjhVAqWaf3qm"></script>
</head>
<body>
    <h1>Test Snap Final</h1>
    <button onclick="testSnap()">Test Snap Popup</button>
    
    <script>
        function testSnap() {
            console.log('=== Testing Snap ===');
            console.log('Snap available:', typeof snap !== 'undefined');
            console.log('Snap object:', snap);
            console.log('Snap.pay function:', typeof snap.pay);
            
            if (typeof snap !== 'undefined' && snap.pay) {
                console.log('Snap is available, testing popup...');
                
                // Test with a real-looking token (this will show error but popup should appear)
                snap.pay('test-token-123', {
                    onSuccess: function(result) {
                        console.log('Success:', result);
                        alert('Payment Success!');
                    },
                    onPending: function(result) {
                        console.log('Pending:', result);
                        alert('Payment Pending!');
                    },
                    onError: function(result) {
                        console.log('Error:', result);
                        alert('Payment Error (expected)!');
                    },
                    onClose: function() {
                        console.log('Closed');
                        alert('Payment Popup Closed!');
                    }
                });
            } else {
                alert('Snap is NOT available! Check console.');
            }
        }
        
        // Check on page load
        window.onload = function() {
            console.log('=== Page Loaded ===');
            console.log('Snap available:', typeof snap !== 'undefined');
            if (typeof snap !== 'undefined') {
                console.log('Snap object:', snap);
                console.log('Snap.pay function:', typeof snap.pay);
            }
        };
    </script>
</body>
</html> 